$(document).ready(function() {
    var countryApi = $("#countryCode").attr("country-api");
    $.ajax({
        url: countryApi,
        type: "GET",
        success: function (res) {
            if (res.code == 200) {
                var countryData = res.data;
                var countryCodeFlag = true;
                var filteredCountryCode =[]
                if (countryData && countryCodeFlag == true) {
                    for(var p=0; p < countryData.length; p++){
                        let newData = countryData[p].callingCode
                        if(newData){
                            newData = newData.replace("+","");
                            if(filteredCountryCode.indexOf(newData) !== -1){
                            }else{
                                filteredCountryCode.push(newData);
                            }
                        }
                    }
                    for (var k = 0; k < filteredCountryCode.length; k++) {
                        filteredCountryCode.sort(function (a, b) {
                            return a - b;
                        });
                        $("#countryCode").append( "<option value="+filteredCountryCode[k]+">" +filteredCountryCode[k]+"</option>");
    
                    }
                    let defaultCountryCode = $("#countryCode").attr("data-default-code");
                    if( $('.myUrlLoginUnique').length )
                        $.ajax({
                            url: $(".myUrlLoginUnique").attr("data-url"),
                            type: "GET",
                            success: function (res) {
                                $("#countryCode").val(res.data.contactDetails.mobile.callingCode).change();
                                if (defaultCountryCode){
                                    $("#countryCode").val(defaultCountryCode).change();
                                }
                            },
                            error: function (e) { 

                            }
                        });
    
                    if (defaultCountryCode){
                        $("#countryCode").val(defaultCountryCode).change();
                    }
                }
            } else {
            }
        },
        error: function (err) {
        }
    });
});