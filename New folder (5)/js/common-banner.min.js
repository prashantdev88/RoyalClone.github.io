// Video Popup [START]

//Popup video YouTube [START]
$(document).ready(function () {
    var videoPlay = document.getElementsByClassName('vid')[0];
    if (videoPlay) {
        document.getElementsByClassName('vid')[0].play();
    }


    // Gets the video src from the data-src on each button
    var $videoSource;
    $('.video-source-btn').click(function () {
        $videoSource = $(this).data("src");
    });

    // when the modal is opened autoplay it  
    $('.popup-video-play').on('shown.bs.modal', function (e) {
        $(".popup-video-play video").attr('src', $videoSource);
    });

    // stop playing the video when I close the modal
    $('.popup-video-play').on('hide.bs.modal', function (e) {
        $(".popup-video-play video").attr('src', '');
    })
    // document ready  
});
//Popup video Source [END]

//Popup video YouTube [START]
$(document).ready(function () {
    // Gets the video src from the data-src on each button
    var $videoYoutube;
    $(document).on('click touchstart', '.video-youtube-btn', function () {
        $videoYoutube = $(this).data("src");
        $(".popup-youtube-play iframe").attr('src', $videoYoutube + "?rel=0&amp;autoplay=1&amp;controls=1&amp;loop=1&amp;");
    });

    // when the modal is opened autoplay it  
    $('.popup-youtube-play').on('shown.bs.modal', function (e) {
        // set the video src to autoplay. 

    });

    // stop playing the youtube video when I close the modal
    $('.popup-youtube-play').on('hide.bs.modal', function (e) {
        $(".popup-youtube-play iframe").attr('src', $videoYoutube);
    })

    let videoDataVal = $(".video-box").children(".vid").attr("autoplay");
    if (videoDataVal == "autoplay") {
        $(".video-box").children(".vid").siblings(".video-play-overlay").children(".video-play-btn").children(".icon-play").attr("style", "display: none;");
        $(".video-box").children(".vid").siblings(".video-play-overlay").children(".video-play-btn").children(".icon-pause").attr("style", "display: inline;");
    }

});
//Popup video YouTube [END]

// Video Popup [END]

$(document).ready(function () {
    let href = window.location.href;
    var content = href.includes("finance-meteor");

    if (content == true) {

        if (!window.matchMedia("(max-width: 767px)").matches) {

            let text = $(".text").eq(2).children("p").text();
            let length = text.length;
            let subStr = text.substring(0, 80);
            let fullStr = text.substring(0, length);

            $(".text").eq(2).children("p").text(subStr + "..." + " ");

            $(".text").eq(2).children("p").append($(`<a class="readMore1" href="javascript:void(0)">Read More</a>`));
            $(".readMore1").click(function () {
                $(".text").eq(2).children("p").text(fullStr);
            })
        } else {

            let text = $(".text").eq(2).children("p").text();
            let length = text.length;
            let subStr = text.substring(0, 200);
            let fullStr = text.substring(0, length);

            $(".text").eq(2).children("p").text(subStr + "..." + " ");

            $(".text").eq(2).children("p").append($(`<a class="readMore1" href="javascript:void(0)">Read More</a>`));
            $(".readMore1").click(function () {
                $(".text").eq(2).children("p").text(fullStr);
            })

        }
    }

});
$(function(){
    $(document).on('click','.bannerAnalyticsBtn',function(){
     if($(this).parent("div").hasClass("video-play-overlay")){
      let bannerName = $(this).parent().siblings(".banner-main-heading").text().trim();
      var nextUrl = $(this).attr("data-src");
      let ctaText = $(this).text().trim();
      if(nextUrl == undefined){
        nextUrl = $(this).attr("href");
      }
     let imageUrl = $(this).parent(".video-play-overlay").siblings("picture").children("img").attr("srcset");
     let imageAltText = $(this).parent(".video-play-overlay").siblings("picture").children("img").attr("alt");
      dataLayer.push({
            'event':'banner',
            'eventCategory':'banner',
            'eventAction':imageAltText,
            'eventLabel':nextUrl,
            'headingName':bannerName,
            'assetPath':imageUrl,
            'clickText':ctaText
        });
    }else if($(this).hasClass("video-youtube-btn")){
        let bannerName = $(this).parent().siblings(".banner-main-heading").text().trim();
        var nextUrl = $(this).attr("data-src");
        let ctaText = $(this).text().trim();
        if(nextUrl == undefined){
          nextUrl = $(this).attr("href");
        }
       let imageUrl = $(this).parent(".banner-btn").parent(".txt-box").parent(".container-fluid").parent(".disp-tbl-cel").parent(".disp-tbl").parent(".banner-inner-txt").siblings(".banner-inner-img").children("picture").children("img").attr("srcset");
       let imageAltText = $(this).parent(".banner-btn").parent(".txt-box").parent(".container-fluid").parent(".disp-tbl-cel").parent(".disp-tbl").parent(".banner-inner-txt").siblings(".banner-inner-img").children("picture").children("img").attr("alt");
        dataLayer.push({
              'event':'banner',
              'eventCategory':'banner',
              'eventAction':imageAltText,
              'eventLabel':nextUrl,
              'headingName':bannerName,
              'assetPath':imageUrl,
              'clickText':ctaText
          });
    }else if($(this).hasClass("mobileBtnAna")){
            let bannerName = $(this).siblings(".banner-inner-txt").children(".disp-tbl").children(".disp-tbl-cel").children(".container-fluid").children(".txt-box").children(".banner-main-heading").text().trim();
            var nextUrl = $(this).attr("href");
            let ctaText = $(this).siblings(".banner-inner-txt ").children(".disp-tbl").children(".disp-tbl-cel ").children(".container-fluid").children(".txt-box").children(".banner-btn").children(".bannerAnalyticsBtn").text().trim();
            if(nextUrl == undefined){
              nextUrl = $(this).attr("href");
            }
           let imageUrl = $(this).siblings(".banner-inner-img").children("picture").children("img").attr("srcset");
           let imageAltText = $(this).siblings(".banner-inner-img").children("picture").children("img").attr("alt");
            dataLayer.push({
                  'event':'banner',
                  'eventCategory':'banner',
                  'eventAction':imageAltText,
                  'eventLabel':nextUrl,
                  'headingName':bannerName,
                  'assetPath':imageUrl,
                  'clickText':ctaText
              });      
    }else{
        let bannerName = $(this).parent().siblings(".banner-main-heading").text().trim();
        var nextUrl = $(this).attr("data-src");
        let ctaText = $(this).text().trim();
        if(nextUrl == undefined){
          nextUrl = $(this).attr("href");
        }
       let imageUrl = $(this).parent(".banner-btn").parent(".txt-box").parent(".container-fluid").parent(".disp-tbl-cel").parent(".disp-tbl").parent(".banner-inner-txt").siblings(".banner-inner-img").children("picture").children("img").attr("srcset");
       let imageAltText = $(this).parent(".banner-btn").parent(".txt-box").parent(".container-fluid").parent(".disp-tbl-cel").parent(".disp-tbl").parent(".banner-inner-txt").siblings(".banner-inner-img").children("picture").children("img").attr("alt");
        dataLayer.push({
              'event':'banner',
              'eventCategory':'banner',
              'eventAction':imageAltText,
              'eventLabel':nextUrl,
              'headingName':bannerName,
              'assetPath':imageUrl,
              'clickText':ctaText
          });
    }
    });
    });

